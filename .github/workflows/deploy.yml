name: SSH Deploy to HTTP Server

on:
  push:
    branches:
      - main

jobs:
  deploy-http:
    runs-on: ubuntu-latest

    steps:
     - name: SSH Deploy HTTP project
       run: |
         echo "${{ secrets.TALHA_KEY }}" > ~/ssh_key
         chmod 600 ~/ssh_key
         ssh -i ~/ssh_key -o StrictHostKeyChecking=no ubuntu@3.27.171.210 cd /home/ubuntu/CICD/http && git pull origin main && npm install && npm run build && pm2 start dist/index.js --name http-server


                  


